var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,n=(e,n)=>{for(var s in n||(n={}))a.call(n,s)&&o(e,s,n[s]);if(t)for(var s of t(n))r.call(n,s)&&o(e,s,n[s]);return e};const s={};import{R as l,L as c,T as i,r as m,a as d,C as g,b as f,c as u,B as p}from"./vendor.f478e47a.js";const x=l.createContext({}),h=()=>{const{goods:e,goodsInCart:t,setGoodsInCart:a}=l.useContext(x),r=e.filter((e=>!!t.find((t=>t.good===e.id)))).reduce(((e,t)=>e+t.price),0);return{goodsInCart:t,setGoodsInCart:a,totalPrice:r}},E=e=>{const{totalPrice:t}=h(),{getImageUrl:a}=l.useContext(x);return l.createElement("header",{className:"flex justify-between p-4 border-b"},l.createElement(c,{to:"/react-sneakers/"},l.createElement("div",{className:"group flex gap-3 m-4 items-center"},l.createElement("img",{src:a("logo.png"),alt:"logo",className:"w-10 h-10 transition ease-in-out duration-200 transform group-hover:scale-125"}),l.createElement("div",null,l.createElement("h3",{className:"font-bold uppercase text-xl"},"React Sneakers"),l.createElement("p",{className:"text-sm text-gray-500"},"Магазин лучших кроссовок")))),l.createElement("div",{className:"flex items-center m-4"},l.createElement("ul",{className:"flex gap-6 items-center"},l.createElement("li",{className:"group flex gap-2 items-center cursor-pointer",onClick:e.onClickCart},l.createElement("img",{src:a("cart.svg"),alt:"Cart",className:"transition ease-in-out duration-200 transform group-hover:scale-125"}),l.createElement("span",null,t," руб.")),l.createElement("li",{className:"cursor-pointer transition ease-in-out duration-200 transform hover:scale-125"},l.createElement(c,{to:"/react-sneakers/favorites/"},l.createElement("img",{src:a("favorites.svg"),alt:"Favorites"}))),l.createElement("li",{className:"cursor-pointer transition ease-in-out duration-200 transform hover:scale-125"},l.createElement(c,{to:"/react-sneakers/orders/"},l.createElement("img",{src:a("user.svg"),alt:"User"}))))))},v=({title:e,description:t,img:a,onClose:r})=>l.createElement("div",{className:"flex flex-col items-center gap-4 flex-grow justify-center"},l.createElement("img",{src:a,alt:"Empty"}),l.createElement("h3",{className:"font-bold text-xl"},e),l.createElement("span",{className:"text-center w-52 text-sm"},t),r?l.createElement("button",{className:"flex flex-none group justify-center items-center text-center border-0 bg-btn relative h-14 w-56 text-white rounded-xl active:bg-green-700 hover:opacity-90 focus:outline-none",onClick:r},l.createElement("img",{className:"absolute left-6 transition duration-500 ease-in-out transform group-hover:-translate-x-1",src:"/img/arrow-left.svg",alt:"Arrow"}),l.createElement("span",{className:"pl-4"},"Вернуться назад")):l.createElement(c,{to:"/react-sneakers/"},l.createElement("button",{className:"flex flex-none group justify-center items-center text-center border-0 bg-btn relative h-14 w-56 text-white rounded-xl active:bg-green-700 hover:opacity-90 focus:outline-none"},l.createElement("img",{className:"absolute left-6 transition duration-500 ease-in-out transform group-hover:-translate-x-1",src:"/img/arrow-left.svg",alt:"Arrow"}),l.createElement("span",{className:"pl-4"},"Вернуться назад")))),b=({onClose:e,onRemove:t})=>{const[a,r]=l.useState(!1),[o,n]=l.useState(),{goods:s,goodsInCart:c,setGoodsInCart:g,isCartOpen:f}=l.useContext(x),{totalPrice:u}=h();return l.createElement(i.Root,{appear:!0,show:f,as:m.exports.Fragment},l.createElement("aside",{className:"fixed inset-0 overflow-y-hidden z-10"},l.createElement("div",{className:"absolute inset-0 overflow-hidden"},l.createElement(i.Child,{as:m.exports.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0"},l.createElement("div",{onClick:e,className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity"})),l.createElement(i.Child,{as:m.exports.Fragment,enter:"transform transition ease-in-out duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-300",leaveFrom:"translate-x-0",leaveTo:"translate-x-full"},l.createElement("div",{className:"absolute inset-y-0 right-0 bg-white w-96 shadow-2xl p-6 flex flex-col gap-4"},l.createElement("div",{className:"flex justify-between flex-none"},l.createElement("h2",{className:"text-xl font-bold mb-2"},"Корзина"),l.createElement("button",{onClick:e,className:"border-0 opacity-60 hover:opacity-100 transition-opacity focus:outline-none"},l.createElement("img",{src:"/img/delete.svg",alt:"Close"}))),c.length>0?l.createElement(m.exports.Fragment,null,l.createElement("div",{className:"flex flex-col gap-4 flex-grow overflow-auto"},s.filter((e=>!!c.find((t=>t.good===e.id)))).map((e=>l.createElement("div",{key:e.id,className:"flex items-center justify-between gap-4 border rounded-xl p-4"},l.createElement("img",{className:"",src:e.imgUrl,alt:"Sneakers",height:70,width:70}),l.createElement("div",{className:"flex flex-col gap-2"},l.createElement("p",{className:"text-sm"},e.name),l.createElement("p",{className:"font-bold"},e.price," руб.")),l.createElement("button",{className:"border-0 opacity-60 hover:opacity-100 transition-opacity focus:outline-none"},l.createElement("img",{onClick:()=>t(c.find((t=>t.good===e.id))),src:"/img/delete.svg",alt:"Delete",className:"w-14"})))))),l.createElement("div",{className:"flex flex-col gap-2 flex-none"},l.createElement("div",{className:"flex justify-between"},l.createElement("span",null,"Итого:"),l.createElement("div",{className:"border-b-2 border-dashed flex-grow mx-1.5 mb-1.5"}),l.createElement("span",{className:"font-bold"},u," руб.")),l.createElement("div",{className:"flex justify-between"},l.createElement("span",null,"Включая налог 5%:"),l.createElement("div",{className:"border-b-2 border-dashed flex-grow mx-1.5 mb-1.5"}),l.createElement("span",{className:"font-bold"},u-Math.round(.95*u)," руб."))),l.createElement("button",{onClick:()=>{d.post("https://60f0071af587af00179d3cf2.mockapi.io/orders",{goods:c}).then((e=>n(e.data.id))).catch((e=>console.log(e))),r(!0),c.forEach((e=>{d.delete(`https://60f0071af587af00179d3cf2.mockapi.io/cart/${e.id}`).then((e=>console.log(e.data.id,e.statusText))).catch((e=>console.log(e)))})),g([])},className:"flex flex-none group justify-center items-center text-center border-0 bg-btn relative h-14 text-white rounded-xl active:bg-green-700 hover:opacity-90 focus:outline-none"},"Оформить заказ",l.createElement("img",{className:"absolute right-8 transition duration-500 ease-in-out transform group-hover:translate-x-1",src:"/img/arrow.svg",alt:"Arrow"}))):l.createElement(v,{title:a?"Заказ оформлен!":"Корзина пустая",description:a?`Ваш заказ #${o} скоро будет передан курьерской доставке`:"Добавьте хотя бы одну пару кроссовок, чтобы сделать заказ.",img:a?"/img/order.jpg":"/img/cart-empty.jpg",onClose:e}))))))},y=({isLoading:e,id:t,name:a,imgUrl:r,price:o,onClickPlus:n,onClickFavorite:s})=>{const{isGoodsInCart:c,isGoodsInFavorites:i}=l.useContext(x);return l.createElement("div",{className:"border rounded-2xl w-56 p-6 flex flex-col gap-4 relative hover:shadow-xl transition ease-in-out duration-200 transform hover:-translate-y-1"},e?l.createElement(g,{speed:2,width:200,height:235,viewBox:"0 0 210 260",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb"},l.createElement("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"175",height:"130"}),l.createElement("rect",{x:"0",y:"170",rx:"4",ry:"4",width:"93",height:"15"}),l.createElement("rect",{x:"0",y:"230",rx:"0",ry:"0",width:"70",height:"32"}),l.createElement("rect",{x:"143",y:"230",rx:"0",ry:"0",width:"32",height:"32"}),l.createElement("rect",{x:"0",y:"150",rx:"4",ry:"4",width:"175",height:"15"})):l.createElement(m.exports.Fragment,null,s&&l.createElement("button",{className:"absolute border-0  focus:outline-none transition ease-in-out duration-200 transform hover:scale-125",onClick:()=>{s({good:t})}},l.createElement("img",{src:i(t)?"/img/heart-active.svg":"/img/heart.svg",alt:"Heart"})),l.createElement("img",{className:"place-self-center",src:`img/goods/${r}`,alt:"sneakers",width:133,height:113}),l.createElement("h5",{className:"font-normal"},a),l.createElement("div",{className:"flex justify-between items-center"},l.createElement("div",null,l.createElement("p",{className:"uppercase text-sm text-gray-400"},"цена:"),l.createElement("b",null,o," руб.")),n&&l.createElement("button",{className:"border-0 focus:outline-none transition ease-in-out duration-200 transform hover:scale-125",onClick:()=>{n({good:t})}},l.createElement("img",{src:c(t)?"/img/checked.svg":"/img/plus.svg",alt:"Plus"})))))},N=({goods:e,searchValue:t,onChangeSearchValue:a,onAddToCart:r,onAddToFavorites:o,setSearchValue:s,isLoading:c,getImageUrl:i})=>l.createElement(m.exports.Fragment,null,l.createElement("div",{className:"flex items-center justify-between m-4"},l.createElement("h1",{className:"font-bold text-3xl"},t?`Поиск по запросу: "${t}"`:"Все кроссовки"),l.createElement("div",{className:"flex border rounded-lg items-center w-76"},l.createElement("img",{src:i("search.svg"),alt:"Search",className:"mx-2"}),l.createElement("input",{onChange:a,value:t,className:"border-0 outline-none rounded-lg h-10 text-gray-700",type:"text",placeholder:"Поиск..."}),t&&l.createElement("img",{onClick:()=>s(""),src:i("delete.svg"),alt:"Clear",className:"mr-2 justify-self-end w-6"}))),l.createElement("div",{className:"flex p-4 flex-wrap gap-10 justify-start"},(()=>{const a=e.filter((e=>e.name.toLowerCase().includes(t.toLowerCase())));return(c?[...Array(8)]:a).map(((e,t)=>l.createElement(y,n({isLoading:c,key:e?e.id:t,onClickFavorite:o,onClickPlus:r},e))))})())),w=({onAddToCart:e,onAddToFavorites:t})=>{const{goods:a,goodsInFavorites:r}=l.useContext(x);return l.createElement(m.exports.Fragment,null,l.createElement("div",{className:"flex items-center justify-between m-4"},l.createElement("h1",{className:"font-bold text-3xl"},"Мои закладки")),r.length>0?l.createElement("div",{className:"flex p-4 flex-wrap gap-8 justify-start"},a.filter((e=>!!r.find((t=>t.good===e.id)))).map((a=>l.createElement(y,n({key:a.id,onClickFavorite:t,onClickPlus:e,favorites:r},a))))):l.createElement("div",{className:"my-36"},l.createElement(v,{title:"Закладок нет :(",description:"Вы ничего не добавляли в закладки",img:"/img/empty-smile.svg"})))},C=({onAddToCart:e,onAddToFavorites:t})=>{const[a,r]=l.useState([]),{goods:o,isLoading:s,setIsLoading:c}=l.useContext(x);return l.useEffect((()=>{c(!0),d.get("https://60f0071af587af00179d3cf2.mockapi.io/orders").then((e=>{const t=e.data.reduce(((e,t)=>[...e,...t.goods]),[]).map((e=>o.find((t=>t.id===e.good))));r(t),c(!1)})).catch((e=>console.log(e)))}),[]),l.createElement(m.exports.Fragment,null,l.createElement("div",{className:"flex items-center justify-between m-4"},l.createElement("h1",{className:"font-bold text-3xl"},"Ваши заказы")),a.length>0?l.createElement("div",{className:"flex p-4 flex-wrap gap-8 justify-start"},(s?[...Array(8)]:a).map(((e,t)=>l.createElement(y,n({isLoading:s,key:t},e))))):l.createElement("div",{className:"my-36"},l.createElement(v,{title:"У вас нет заказов",description:"Оформите хотя бы один заказ.",img:"/img/orders-empty.svg"})))},k=()=>{const[e,t]=l.useState([]),[a,r]=l.useState([]),[o,n]=l.useState([]),[c,i]=l.useState(!1),[m,g]=l.useState(""),[u,p]=l.useState(!0);l.useEffect((()=>{Promise.all([d.get("https://60f0071af587af00179d3cf2.mockapi.io/cart"),d.get("https://60f0071af587af00179d3cf2.mockapi.io/favorites"),d.get("https://60f0071af587af00179d3cf2.mockapi.io/goods")]).then((e=>{p(!1),r(e[0].data),n(e[1].data),t(e[2].data)}))}),[]);const h=e=>a.some((t=>t.good===e)),v=e=>o.some((t=>t.good===e));function y(e){return new URL(`./assets/img/${e}`,s.url).href}const k=e=>{const t=a.find((t=>t.good===e.good));h(e.good)?d.delete(`https://60f0071af587af00179d3cf2.mockapi.io/cart/${t.id}`).catch((e=>console.error(e))).then((()=>r((t=>t.filter((t=>t.good!==e.good)))))):d.post("https://60f0071af587af00179d3cf2.mockapi.io/cart",e).then((e=>r((t=>[...t,e.data])))).catch((e=>console.error(e)))},F=e=>{const t=o.find((t=>t.good===e.good));v(e.good)?d.delete(`https://60f0071af587af00179d3cf2.mockapi.io/favorites/${t.id}`).catch((e=>console.error(e))).then((()=>n((t=>t.filter((t=>t.good!==e.good)))))):d.post("https://60f0071af587af00179d3cf2.mockapi.io/favorites",e).then((e=>n((t=>[...t,e.data])))).catch((e=>console.error(e)))};return l.createElement(x.Provider,{value:{goods:e,goodsInCart:a,goodsInFavorites:o,isGoodsInCart:h,isGoodsInFavorites:v,isCartOpen:c,setGoodsInCart:r,isLoading:u,setIsLoading:p,getImageUrl:y}},l.createElement("div",{className:"bg-white rounded-3xl shadow-lg max-w-wrapper my-12 mx-auto flex flex-col"},l.createElement(E,{onClickCart:()=>{i(!0),document.body.style.overflow="hidden"}}),l.createElement(b,{onClose:()=>{i(!1),document.body.style.overflow="auto"},onRemove:e=>{d.delete(`https://60f0071af587af00179d3cf2.mockapi.io/cart/${e.id}`).catch((e=>console.error(e))).then((()=>r((t=>t.filter((t=>t.id!==e.id))))))}}),l.createElement("main",{className:"p-4 flex flex-col flex-grow"},l.createElement(f,{path:"/react-sneakers/",exact:!0},l.createElement(N,{goods:e,searchValue:m,setSearchValue:g,onChangeSearchValue:e=>{g(e.target.value)},onAddToCart:k,onAddToFavorites:F,goodsInFavirites:o,isLoading:u,getImageUrl:y})),l.createElement(f,{path:"/react-sneakers/favorites/",exact:!0},l.createElement(w,{onAddToCart:k,onAddToFavorites:F})),l.createElement(f,{path:"/react-sneakers/orders/",exact:!0},l.createElement(C,{onAddToCart:k,onAddToFavorites:F})))))};u.render(l.createElement(l.StrictMode,null,l.createElement(p,null,l.createElement(k,null))),document.getElementById("root"));
